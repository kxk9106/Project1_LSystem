<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Project1LSystem</title>
	<meta name="generator" content="BBEdit 11.1" />
	<link href="libraries/jquery-ui-1.11.4.custom/jquery-ui.css" rel="stylesheet">
	<link href="libraries/jquery-ui-1.11.4.custom/jquery-ui.css" rel="stylesheet">
	<link href="libraries/jquery-ui-1.11.4.custom/jquery-ui.min.css">
	<link href ="libraries/jquery-ui-1.11.4.custom/jquery-ui.structure.css">
	<link href="libraries/jquery-ui-1.11.4.custom/jquery-ui.structure.min.css">
	<link href="libraries/jquery-ui-1.11.4.custom/jquery-ui.theme.css">
	<link href="libraries/jquery-ui-1.11.4.custom/jquery-ui.theme.min.css">

</head>
<script src="libraries/jquery-1.12.2.js"></script>
<script src="libraries/victor-1.1.0/build/victor.js"></script>
<script src="libraries/jquery-ui-1.11.4.custom/jquery-ui.js"></script>

<body>
	<canvas id = "canvas" class = "toggle"> </canvas>
	<button id="plantButton">Plant</button>
	<span>
		<label for="style1">Style 1</label>
		<input type="radio" name= "form" value= "style1" id="style1">
	</span>
	<span>
		<label for="style2">Style 2</label>
		<input type="radio" name = "form" value= "style2" checked id="style2">
	</span>
	<span>
		<label for="style3">Style 3</label>
		<input type="radio" name = "form" value= "style3" checked id="style3">
	</span>
	<button id="eraseButton">Hurricane</button>

</body>

<script>
!function(){
	'use strict'
	var count = 2;
	var canvas;
	var ctx;
	var audioCtx;
	var plant = true;
	var water = false;
	
	
	var pot1 = false;
	var pot2 = false;
	var pot3 = false;
	
	var plant1 = 0;
	var plant2 = 0;
	var plant3 = 0;
	
	var click = true;
	var click2 = true;
	var click3 = true;
	
	var j = 0;
	var p = 0;
	var t = 0;
	
	var lastPos;
	var lastPos2;
	var lastPos3;
	
	var vec2 = Victor;
	
	var style;
	var style2;
	var style3;
	
	var planted = false;
	var planted2 = false;
	var planted3 = false
	
	

	
	$("button").button();
	
	$('#plantButton')
		.click(function(){
			plant = true;
			water = false;
	});
	$('#eraseButton')
		.click(function(){
			$(".toggle").effect("shake");
				ctx.fillStyle = "black";
				ctx.fillRect(0,0,canvas.width,canvas.height);
	
				ctx.fillStyle = "red";
				ctx.fillRect(canvas.width/6+70, canvas.height-60, 50,50);
				ctx.fillRect(canvas.width - canvas.width/1.8 + 70, canvas.height-60, 50,50);
				ctx.fillRect(canvas.width - canvas.width/4 + 70, canvas.height-60, 50,50);
	
				ctx.fillStyle = "#FEFCD7";
				ctx.beginPath();
				ctx.arc(100,75,50,0,2*Math.PI);
				ctx.stroke();
				ctx.fill();
	});
	
	
	
	function setup(){
		canvas = document.getElementById("canvas");
		ctx = canvas.getContext("2d");
		canvas.setAttribute("width",window.innerWidth-16);
		canvas.setAttribute("height",window.innerHeight - 100);
		audioCtx = new AudioContext();
		
		ctx.fillStyle = "black";
		ctx.fillRect(0,0,canvas.width,canvas.height);
		
		ctx.fillStyle = "red";
		ctx.fillRect(canvas.width/6+70, canvas.height-60, 50,50);
		ctx.fillRect(canvas.width - canvas.width/1.8 + 70, canvas.height-60, 50,50);
		ctx.fillRect(canvas.width - canvas.width/4 + 70, canvas.height-60, 50,50);
		
		ctx.fillStyle = "#FEFCD7";
		ctx.beginPath();
		ctx.arc(100,75,50,0,2*Math.PI);
		ctx.stroke();
		ctx.fill();
		
		
		lastPos = vec2(canvas.width/6+94,canvas.height-50);
		lastPos2 = vec2(canvas.width - canvas.width/1.8 + 94,canvas.height-50);
		lastPos3 = vec2(canvas.width - canvas.width/4 + 94,canvas.height-50);

		
	}
	setup();
	
	window.Turtle = function(canvas,startX,startY){
		Object.assign(this, {
			canvas:null,
			weight:1,
			color:'red',
			pos: vec2(startX,startY),
			dir: vec2(0,-1),
			pen:1,
			posArray:[],
			dirArray:[],
			penUp : function() {this.pen = 0},
			penDown: function() {this.pen = 1},
			
			push: function(){
				this.posArray.push (this.pos.clone())
				this.dirArray.push(this.dir.clone())
			},
			
			pop: function() {
				this.pos = this.posArray.pop()
				this.dir = this.dirArray.pop()
				this.canvas.moveTo(this.pos.x,this.pos.y)
			},
			
			//THIS IS IN RADIANS!!!
			rotate: function(amt){
				this.dir.rotate(amt)
			},
			
			move: function(amt){
				if(this.pen) this.canvas.beginPath()
				this.canvas.moveTo(this.pos.x,this.pos.y)
				
				this.pos.x += this.dir.x * amt
				this.pos.y += this.dir.y * amt
				
				if(this.pen){
					this.canvas.lineTo(this.pos.x,this.pos.y)
					this.canvas.lineWidth = this.weight
					this.canvas.stroke()
					this.canvas.closePath()
				}
				else{
					this.moveTo(this.pos.x,this.pos.y)
				}
			},
		})
		this.canvas = canvas
		this.canvas.moveTo(this.pos.x,this.pos.y)
	}
	
	
	var degToRad = function( deg ) {
      return deg * Math.PI / 180
    }
	
	
	//plant 1 rules
	window.xavier = new Turtle(ctx, 250,window.innerHeight);
	var string = "F";
	var newString = "";
	function rules(){
	if(plant == true && planted == false){
		if(document.getElementById('style1').checked){
			style = 1;
			
		}
		else if (document.getElementById('style2').checked){
			style = 2;
		}
		else if (document.getElementById('style3').checked){
			style = 3;
		}
		planted = true;
	}
		newString = "";
		for(var i = 0; i < string.length; i++)
		{
			if(string.charAt(i) == 'F')
			{
				if(style ==1){
					newString += "F[+FF]F[-FF][FF]";
				}
				else if (style ==2){
					newString += "F[F-F]F[+F]F";
				}
				else if (style ==3){
					newString += "F[-F]F[+F][-FF]";
				}
			}	
			else
			{
				newString += string.charAt(i);
			}	
		}
		
		string = newString;
	}
	
	var thetaDeg = 20;
	var theta = 2;
	
		
	theta = degToRad(thetaDeg);
		

	var time = 0;
	var timeDeg;
	var right = true;
	
	var mousex;
	var mousey;
	var event;
	
	

	canvas.onmousedown = function(event){
		mousex = event.x;
  		mousey = event.y;

  		getMousePosition();
	}
	
	
	function getMousePosition(event){
		
		//1st pot
		if((mousex >= canvas.width/6+78) & (mousex < canvas.width/6 + 78 + 50)
		&& (mousey >= canvas.height-49) && (mousey < canvas.height-49 + 50)){
				pot1 = true;
				pot2 = false;
				pot3 = false;
				if(plant1 < 3 && click == true){
					plant1++;
					drawCorrect();
				}
				
		}
		
		//2nd pot
		if((mousex >= canvas.width - canvas.width/1.8 + 78) && (mousex < canvas.width - canvas.width/1.8 + 78 + 50)
		&& (mousey >= canvas.height-49) && (mousey < canvas.height-49 + 50)){
				pot1 = false;
				pot2 = true;
				pot3 = false;
				if(plant2 < 3 && click2 == true){
					plant2++;
					drawCorrect2();
				}
		}
		//3rd pot
		if((mousex >= canvas.width - canvas.width/4 + 78) && (mousex < canvas.width - canvas.width/4 + 78 + 50)
		&& (mousey >= canvas.height-49) && (mousey < canvas.height-49 + 50)){
				pot1 = false;
				pot2 = false;
				pot3 = true;
				if(plant3 < 3 && click3 == true){
					plant3++;
					drawCorrect3();
				}
		}
	}
	
		

	
	function draw(){	
		
		xavier.pos = lastPos;

		ctx.fillStyle = "green";		

		
		ctx.save();
		timeDeg = degToRad(time);
		ctx.translate(0,0);
		ctx.rotate(timeDeg);
		
		
		                    
		
		function myLoop () {           
			setTimeout(function () {    
				if(string.charAt(j) =='F')
				{
					ctx.strokeStyle = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() 
					* 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';
					xavier.move(15)
				}
				else if(string.charAt(j) =='+')
				{
	
					xavier.rotate(-theta);
				}
				else if(string.charAt(j) == '-')
				{
					xavier.rotate(theta);
				}
				else if(string.charAt(j) == '[')
				{
					xavier.push(xavier.pos.clone());
				}
				else if(string.charAt(j) == ']')
				{
					xavier.pop();
				}  
				       
				j++;                   
				if (j < string.length) {          
					myLoop();
					click = false;
				}
				if(j == string.length){
					click = true;
				}
			}, 5)
			lastPos = xavier.pos;
		}

		myLoop(); 

		
		ctx.restore();
	}
	
	
	
	function drawCorrect(){
		for(var k = 0; k < plant1; k++){
			rules();
		}
		draw();
	}
	
	
	
	
	
	
	
	
	//plant 2 stuff
	window.jade = new Turtle(ctx, 250,window.innerHeight);
	var string2 = "F";
	var newString2 = "";
	function rules2(){
		newString2 = "";
		if(plant == true && planted2 == false){
			if(document.getElementById('style1').checked){
				style2 = 1;
			}
			else if (document.getElementById('style2').checked){
				style2 = 2;
			}
			else if (document.getElementById('style3').checked){
				style2 = 3;
			}
			planted2 = true;
		}
		for(var i = 0; i < string2.length; i++)
		{
			if(string2.charAt(i) == 'F')
			{
				if(style2 ==1){
					newString2 += "F[+FF]F[-FF][FF]";
				}
				else if (style2 == 2){
					newString2 += "F[F-F]F[+F]F";
				}
				else if (style2 == 3){
					newString2 += "F[-F]F[+F][-FF]";
				}
			}	
			else
			{
				newString2 += string2.charAt(i);
			}	
			
		}
		string2 = newString2;
	}
	
	function draw2(){	
		jade.pos = lastPos2;

		ctx.fillStyle = "green";		

		
		ctx.save();
		timeDeg = degToRad(time);
		ctx.translate(0,0);
		ctx.rotate(timeDeg);
		
	
		function myLoop2 () {           
			setTimeout(function () {    
				if(string2.charAt(p) =='F')
				{
					ctx.strokeStyle = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() 
					* 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';
					jade.move(15)
				}
				else if(string2.charAt(p) =='+')
				{
	
					jade.rotate(-theta);
				}
				else if(string2.charAt(p) == '-')
				{
					jade.rotate(theta);
				}
				else if(string2.charAt(p) == '[')
				{
					jade.push(jade.pos.clone());
				}
				else if(string2.charAt(p) == ']')
				{
					jade.pop();
				}  
				       
				p++;                   
				if (p < string2.length) {          
					myLoop2();
					click2 = false;
				}
				if(p == string2.length){
					click2 = true;
				}
			}, 5)
			lastPos2 = jade.pos;
		}

		myLoop2(); 

		
		ctx.restore();
	}
	
	
	function drawCorrect2(){
		for(var k = 0; k < plant2; k++){
			rules2();
		}
		draw2();
	}
	
	
	
	//plant3 stuff
	window.kristen = new Turtle(ctx, 250,window.innerHeight);
	var string3 = "F";
	var newString3 = "";
	function rules3(){
		newString3 = "";
		if(plant == true && planted3 == false){
			if(document.getElementById('style1').checked){
				style3 = 1;
			}
			else if (document.getElementById('style2').checked){
				style3 = 2;
			}
			else if (document.getElementById('style3').checked){
				style3 = 3;
			}
			planted3 = true;
	}
		for(var i = 0; i < string3.length; i++)
		{
			if(string3.charAt(i) == 'F')
			{
				if(style3 == 1){
					newString3 += "F[+FF]F[-FF][FF]";
				}
				else if (style3 == 2){
					newString3 += "F[F-F]F[+F]F";
				}
				else if (style3 == 3){
					newString3 += "F[-F]F[+F][-FF]";
				}
			}	
			else
			{
				newString3 += string3.charAt(i);
			}	
			
		}
		string3 = newString3;
	}
	
	function draw3(){	
		kristen.pos = lastPos3;

		ctx.fillStyle = "green";		

		
		ctx.save();
		timeDeg = degToRad(time);
		ctx.translate(0,0);
		ctx.rotate(timeDeg);
		
	
		function myLoop3 () {           
			setTimeout(function () {    
				if(string3.charAt(t) =='F')
				{
					ctx.strokeStyle = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() 
					* 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';
					kristen.move(15)
				}
				else if(string3.charAt(t) =='+')
				{
	
					kristen.rotate(-theta);
				}
				else if(string3.charAt(t) == '-')
				{
					kristen.rotate(theta);
				}
				else if(string3.charAt(t) == '[')
				{
					kristen.push(kristen.pos.clone());
				}
				else if(string3.charAt(t) == ']')
				{
					kristen.pop();
				}  
				       
				t++;                   
				if (t < string3.length) {          
					myLoop3();
					click3 = false;
				}
				if(t == string3.length){
					click3 = true;
				}
			}, 5)
			lastPos3 = kristen.pos;
		}

		myLoop3(); 

		
		ctx.restore();
	}
	
	
	function drawCorrect3(){
		for(var k = 0; k < plant3; k++){
			rules3();
		}
		draw3();
	}
	


}()

  </script>

</html>
