"use strict";!function(){function t(){E=document.getElementById("canvas"),T=E.getContext("2d"),E.setAttribute("width",window.innerWidth),E.setAttribute("height",window.innerHeight-100),W=document.getElementById("canvasWin"),L=W.getContext("2d"),W.setAttribute("width",window.innerWidth),W.setAttribute("height",window.innerHeight/6),j=document.getElementById("canvasP1"),H=j.getContext("2d"),j.setAttribute("width",window.innerWidth/4),j.setAttribute("height",window.innerHeight-100),C=document.getElementById("canvasP2"),D=C.getContext("2d"),C.setAttribute("width",window.innerWidth/4),C.setAttribute("height",window.innerHeight-100),P=document.getElementById("canvasP3"),U=P.getContext("2d"),P.setAttribute("width",window.innerWidth/4),P.setAttribute("height",window.innerHeight-100),_=new AudioContext,K=document.querySelector("audio"),T.fillStyle="black",T.fillRect(0,0,E.width,E.height),H.fillStyle="black",H.fillRect(0,W.height,j.width,j.height),D.fillStyle="black",D.fillRect(0,0,C.width,C.height),U.fillStyle="black",U.fillRect(0,0,P.width,P.height),L.fillStyle="black",L.fillRect(0,0,W.width,W.height),T.fillStyle="red",H.fillStyle="red",D.fillStyle="red",U.fillStyle="red",H.fillRect(j.width/2-25,j.height-60,50,50),D.fillRect(C.width/2-25,C.height-60,50,50),U.fillRect(P.width/2-25,P.height-60,50,50),T.fillStyle="#FEFCD7",T.beginPath(),T.arc(80,75,50,0,2*Math.PI),T.stroke(),T.fill(),T.fillStyle="brown",T.fillRect(0,250,120,10),et=nt(j.width/2,E.height-60),it=nt(C.width/2,E.height-60),ht=nt(P.width/2,E.height-60),mt=et.x,xt=et.x,At=et.y,Rt=et.y,document.querySelector("#trackSelect").onchange=function(t){A(K,t.target.value)},bt=j.getBoundingClientRect(),console.log(bt),A(K,J),St=Genetic.create()}function e(){1==X&&0==at&&(document.getElementById("style1").checked?ot=1:document.getElementById("style2").checked?ot=2:document.getElementById("style3").checked&&(ot=3),at=!0),Ct="";for(var t=0;t<Ht.length;t++)"F"==Ht.charAt(t)?1==ot?Ct+="F[+FF]F[-FF][FF]":2==ot?Ct+="F[F-F]F[+F]F":3==ot&&(Ct+="F[-F]F[+F][-FF]"):Ct+=Ht.charAt(t);Ht=Ct}function i(t,e){var i=t.length,h=Math.floor(Math.random()*i),n=Math.floor(Math.random()*i);h>n&&(n=h);var o=e.substr(0,h)+t.substr(h,n-h)+e.substr(n),l=t.substr(0,h)+e.substr(h,n-h)+t.substr(n);return[o,l]}function h(t){Lt>=j.width/2-25&Lt<j.width/2+25&&$t>=j.height-60&&$t<j.height-10&&1==It?(2>q&&1==N&&0==Ft&&(q++,w()),console.log("breeds: "+Ft),2>q&&1==Ft&&(q++,k())):Lt>=j.width/2-25&Lt<j.width/2+25&&$t>=j.height-60&&$t<j.height-10&&1==kt?(console.log("string: "+Ht),Mt.push(Ht),Tt.push(1)):Lt>=j.width/2-25&Lt<j.width/2+25&&$t>=j.height-60&&$t<j.height-10&&1==Bt&&(a(),window.xavier=new Turtle(H,250,window.innerHeight))}function n(t){console.log("canvas: "+(j.width/2-25)+", "+(j.width/2+25)),Xt>=C.width/2-25&&Xt<C.width/2+25&&Yt>=C.height-60&&Yt<C.height-10&&1==It?(2>G&&1==O&0==gt&&(G++,p()),2>G&&1==gt&&(G++,I())):Xt>=C.width/2-25&&Xt<C.width/2+25&&Yt>=C.height-60&&Yt<C.height-10&&1==kt?(Mt.push(zt),console.log("string: "+zt),Tt.push(2)):Xt>=C.width/2-25&&Xt<C.width/2+25&&Yt>=C.height-60&&Yt<C.height-10&&1==Bt&&(c(),window.jade=new Turtle(D,250,window.innerHeight))}function o(t){console.log("canvas: "+(j.width/2-25)+", "+(j.width/2+25)),qt>=P.width/2-25&&qt<P.width/2+25&&Gt>=P.height-60&&Gt<P.height-10&&1==It?(2>z&&1==V&&0==ft&&(z++,x()),2>z&&1==ft&&(z++,B())):qt>=P.width/2-25&&qt<P.width/2+25&&Gt>=P.height-60&&Gt<P.height-10&&1==kt?(Mt.push(Ot),console.log("string: "+Ot),Tt.push(3)):qt>=P.width/2-25&&qt<P.width/2+25&&Gt>=P.height-60&&Gt<P.height-10&&1==Bt&&s()}function l(){2==Mt.length&&(M(),window.xavier=new Turtle(H,250,window.innerHeight),window.jade=new Turtle(D,250,window.innerHeight),Et=i(Mt[0],Mt[1]),console.log("Genetics: "+Et[0]+" second: "+Et[1]),Mt=[],d(),Ht=Et[0],F(),zt=Et[1],console.log("AlltheString: "+Ht+" sefcondalltheStirng: "+zt),g(),r(Ht,zt),w(),p(),at=!0,ct=!0)}function r(t,e){console.log("stirnwejfioj: "+t+" other: "+e);for(var i=[],h=[],n=new RegExp(/\[/,"g");null!=(i=n.exec(t));)h.push(i.index);for(var o=[],l=[],r=/]/g;null!=(o=r.exec(t));)l.push(o.index);for(var a=0;a<h.length;a++)if(h[a]+1==h[a+1]){var c=t.slice(0,h[a]),s=t.slice(h[a]+1,t.length+1);t=c+s}for(var d=0;d<l.length;d++)if(l[d]+1==l[d+1]){var F=t.slice(0,l[d]),g=t.slice(l[d]+1,t.length+1);t=F+g}for(;0!=l.length;){var f=Math.max.apply(Math,h);h.pop();Math.max.apply(Math,l);l.pop();var w=Math.max.apply(Math,l);if(w>f){var u=t.slice(0,w),v=t.slice(w+1,t.length+1);t=u+v}Ht=t}for(var p=[],y=[],m=new RegExp(/\[/,"g");null!=(p=m.exec(e));)y.push(p.index);for(var x=[],A=[];null!=(x=r.exec(e));)A.push(x.index);for(var R=0;R<y.length;R++)if(y[R]+1==y[R+1]){var b=e.slice(0,y[R]),S=e.slice(y[R]+1,e.length+1);e=b+S}for(var k=0;k<A.length;k++)if(A[k]+1==A[k+1]){var I=e.slice(0,A[k]),B=e.slice(A[k]+1,e.length+1);e=I+B}for(;0!=y.length;){var M=Math.max.apply(Math,y);y.pop();Math.max.apply(Math,A);A.pop();var E=Math.max.apply(Math,A);if(E>M){var T=e.slice(0,E),j=e.slice(E+1,e.length+1);e=T+j}zt=e}}function a(){H.clearRect(0,0,j.width,j.height),H.fillRect(j.width/2-25,j.height-60,50,50),et=nt(j.width/2,E.height-60),Ht="F",Q=0,q=0,N=!0,ot="",at=!1,Ft=!1}function c(){D.clearRect(0,0,j.width,j.height),D.fillRect(j.width/2-25,j.height-60,50,50),it=nt(j.width/2,E.height-60),zt="F",Z=0,G=0,O=!0,lt="",ct=!1,gt=!1}function s(){U.clearRect(0,0,j.width,j.height),U.fillRect(j.width/2-25,j.height-60,50,50),ht=nt(j.width/2,E.height-60),Ot="F",tt=0,z=0,V=!0,rt="",st=!1,ft=!1}function d(){H.clearRect(0,0,j.width,j.height),H.fillStyle="blue",H.fillRect(j.width/2-25,j.height-60,50,50),et=nt(j.width/2,E.height-60),Ht="F",Q=0,q=0,N=!0,ot="",at=!1,Ft=!1}function F(){D.clearRect(0,0,j.width,j.height),D.fillStyle="blue",D.fillRect(j.width/2-25,j.height-60,50,50),it=nt(j.width/2,E.height-60),zt="F",Z=0,G=0,O=!0,lt="",ct=!1,gt=!1}function g(){U.clearRect(0,0,j.width,j.height),U.fillStyle="blue",U.fillRect(j.width/2-25,j.height-60,50,50),ht=nt(j.width/2,E.height-60),Ot="F",tt=0,z=0,V=!0,rt="",st=!1,ft=!1}function f(){function t(){setTimeout(function(){"F"==Ht.charAt(Q)?(H.strokeStyle="white",xavier.move(15)):"+"==Ht.charAt(Q)?xavier.rotate(-Pt):"-"==Ht.charAt(Q)?xavier.rotate(Pt):"["==Ht.charAt(Q)?xavier.push(xavier.pos.clone()):"]"==Ht.charAt(Q)&&xavier.pop(),xavier.pos.x<mt&&xavier.pos.x>0&&(mt=xavier.pos.x,console.log("CanvasX: "+mt)),xavier.pos.x>xt&&xavier.pos.x<j.width&&(xt=xavier.pos.x,console.log("X: "+xt)),xavier.pos.y<At&&xavier.pos.y<j.height&&(At=xavier.pos.y),xavier.pos.y>Rt&&xavier.pos.y>0&&(Rt=xavier.pos.y),Q++,Q<Ht.length&&(t(),N=!1),Q==Ht.length&&(N=!0)},5),et=xavier.pos}xavier.pos=et,H.fillStyle="green",H.save(),Wt=jt(Ut),H.translate(0,0),H.rotate(Wt),t(),H.restore()}function w(){for(var t=0;q>t;t++)e();f()}function u(){Nt="",1==X&&0==ct&&(document.getElementById("style1").checked?lt=1:document.getElementById("style2").checked?lt=2:document.getElementById("style3").checked&&(lt=3),ct=!0);for(var t=0;t<zt.length;t++)"F"==zt.charAt(t)?1==lt?Nt+="F[+FF]F[-FF][FF]":2==lt?Nt+="F[F-F]F[+F]F":3==lt&&(Nt+="F[-F]F[+F][-FF]"):Nt+=zt.charAt(t);zt=Nt}function v(){function t(){setTimeout(function(){"F"==zt.charAt(Z)?(D.strokeStyle="white",jade.move(15)):"+"==zt.charAt(Z)?jade.rotate(-Pt):"-"==zt.charAt(Z)?jade.rotate(Pt):"["==zt.charAt(Z)?jade.push(jade.pos.clone()):"]"==zt.charAt(Z)&&jade.pop(),Z++,Z<zt.length&&(t(),O=!1),Z==zt.length&&(O=!0)},5),it=jade.pos}jade.pos=it,D.fillStyle="green",D.save(),Wt=jt(Ut),D.translate(0,0),D.rotate(Wt),t(),D.restore()}function p(){for(var t=0;G>t;t++)u();v()}function y(){Vt="",1==X&&0==st&&(document.getElementById("style1").checked?rt=1:document.getElementById("style2").checked?rt=2:document.getElementById("style3").checked&&(rt=3),st=!0);for(var t=0;t<Ot.length;t++)"F"==Ot.charAt(t)?1==rt?Vt+="F[+FF]F[-FF][FF]":2==rt?Vt+="F[F-F]F[+F]F":3==rt&&(Vt+="F[-F]F[+F][-FF]"):Vt+=Ot.charAt(t);Ot=Vt}function m(){function t(){setTimeout(function(){"F"==Ot.charAt(tt)?(U.strokeStyle="white",kristen.move(15)):"+"==Ot.charAt(tt)?kristen.rotate(-Pt):"-"==Ot.charAt(tt)?kristen.rotate(Pt):"["==Ot.charAt(tt)?kristen.push(kristen.pos.clone()):"]"==Ot.charAt(tt)&&kristen.pop(),tt++,tt<Ot.length&&(t(),V=!1),tt==Ot.length&&(V=!0)},5),ht=kristen.pos}kristen.pos=ht,U.fillStyle="green",U.save(),Wt=jt(Ut),U.translate(0,0),U.rotate(Wt),t(),U.restore()}function x(){for(var t=0;z>t;t++)y();m()}function A(t,e){t.src=e,t.play(),t.volume=1}function R(){Ct="";for(var t=0;t<Ht.length;t++)"F"==Ht.charAt(t)?1==dt[0]||1==dt[1]?3==dt[0]||3==dt[1]?Ct+="F[+F]F[F-FF]":2!=dt[0]&&2!=dt[1]||(Ct+="F[+FF]F[+F]F"):2==dt[0]||2==dt[1]?3==dt[0]||3==dt[1]?Ct+="F[F-F]FF[+FF]":1!=dt[0]&&1!=dt[1]||(Ct+="F[+FF]F[+F]F"):3!=dt[0]&&3!=dt[1]||(2==dt[0]||2==dt[1]?Ct+="F[F-F]FF[+FF]":1!=dt[0]&&1!=dt[1]||(Ct+="F[+F]F[F-FF]")):Ct+=Ht.charAt(t);Ht=Ct}function b(){Nt="";for(var t=0;t<zt.length;t++)"F"==zt.charAt(t)?1==dt[0]||1==dt[1]?3==dt[0]||3==dt[1]?Nt+="F[+F]F[F-FF]":2!=dt[0]&&2!=dt[1]||(Nt+="F[+FF]F[+F]F"):2==dt[0]||2==dt[1]?3==dt[0]||3==dt[1]?Nt+="F[F-F]FF[+FF]":1!=dt[0]&&1!=dt[1]||(Nt+="F[+FF]F[+F]F"):3!=dt[0]&&3!=dt[1]||(2==dt[0]||2==dt[1]?Nt+="F[F-F]FF[+FF]":1!=dt[0]&&1!=dt[1]||(Nt+="F[+F]F[F-FF]")):Nt+=zt.charAt(t);zt=Nt}function S(){Vt="";for(var t=0;t<Ot.length;t++)"F"==Ot.charAt(t)?1==dt[0]||1==dt[1]?3==dt[0]||3==dt[1]?Vt+="F[+F]F[F-FF]":2!=dt[0]&&2!=dt[1]||(Vt+="F[+FF]F[+F]F"):2==dt[0]||2==dt[1]?3==dt[0]||3==dt[1]?Vt+="F[F-F]FF[+FF]":1!=dt[0]&&1!=dt[1]||(Vt+="F[+FF]F[+F]F"):3!=dt[0]&&3!=dt[1]||(2==dt[0]||2==dt[1]?Vt+="F[F-F]FF[+FF]":1!=dt[0]&&1!=dt[1]||(Vt+="F[+F]F[F-FF]")):Vt+=Ot.charAt(t);Ot=Vt}function k(){for(var t=0;q>t;t++)R();f()}function I(){for(var t=0;G>t;t++)b();v()}function B(){for(var t=0;z>t;t++)S();m()}function M(){ut=new Image,vt=new Image,1==Tt[0]&&(ut.src=j.toDataURL()),2==Tt[0]&&(ut.src=C.toDataURL()),3==Tt[0]&&(ut.src=P.toDataURL()),1==Tt[1]&&(vt.src=j.toDataURL()),2==Tt[1]&&(vt.src=C.toDataURL()),3==Tt[1]&&(vt.src=P.toDataURL()),Tt=[],ut.style.width="10%",ut.style.height="10%",vt.style.width="10%",vt.style.height="10%",console.log("Size: "+yt),yt=W.height-W.height/20,pt*yt+(yt/7-yt)+3*yt>E.width?(pt=1,L.fillRect(pt*yt+(yt/7-yt),0,yt,yt),L.fillRect((pt+1)*yt+(yt/7-yt),0,yt,yt),L.fillStyle="white",L.fillRect((pt+1)*yt+yt/7,0,3,W.height),L.fillStyle="black",L.drawImage(ut,pt*yt+yt/7-yt,0,yt,yt),L.drawImage(vt,(pt+1)*yt+yt/7-yt,0,yt,yt)):(L.fillRect(pt*yt+(yt/7-yt),0,yt,yt),L.fillRect((pt+1)*yt+(yt/7-yt),0,yt,yt),L.fillStyle="white",L.fillRect((pt+1)*yt+yt/7,0,3,W.height),L.fillStyle="black",L.drawImage(ut,pt*yt+yt/7-yt,0,yt,yt),L.drawImage(vt,(pt+1)*yt+yt/7-yt,0,yt,yt)),pt+=2}var E=void 0,T=void 0,j=void 0,H=void 0,C=void 0,D=void 0,P=void 0,U=void 0,W=void 0,L=void 0,X=!0,Y=!1,q=0,G=0,z=0,N=!0,O=!0,V=!0,_=void 0,J="media/Nuvole_Bianche.wav",K=void 0,Q=0,Z=0,tt=0,et=void 0,it=void 0,ht=void 0,nt=Victor,ot=void 0,lt=void 0,rt=void 0,at=!1,ct=!1,st=!1,dt=[],Ft=!1,gt=!1,ft=!1,wt=new Image;wt.src="pictures/bird.png";var ut=void 0,vt=void 0,pt=1,yt=0,mt=0,xt=0,At=0,Rt=0,bt=void 0,St=void 0,kt=!1,It=!0,Bt=!1,Mt=[],Et=[],Tt=[];$("button").button(),$("#plantButton").click(function(){X=!0,Y=!1,kt=!1,It=!0,Bt=!1,H.fillStyle="red",D.fillStyle="red",U.fillStyle="red",H.fillRect(j.width/2-25,j.height-60,50,50),D.fillRect(C.width/2-25,C.height-60,50,50),U.fillRect(P.width/2-25,P.height-60,50,50)}),$("#breedButton").click(function(){kt=!0,It=!1,Bt=!1,H.fillStyle="blue",D.fillStyle="blue",U.fillStyle="blue",H.fillRect(j.width/2-25,j.height-60,50,50),D.fillRect(C.width/2-25,C.height-60,50,50),U.fillRect(P.width/2-25,P.height-60,50,50)}),$("#eraseButton").click(function(){Bt=!0,kt=!1,It=!1,H.fillStyle="yellow",D.fillStyle="yellow",U.fillStyle="yellow",H.fillRect(j.width/2-25,j.height-60,50,50),D.fillRect(C.width/2-25,C.height-60,50,50),U.fillRect(P.width/2-25,P.height-60,50,50)}),$(function(){$("#draggable").draggable()}),t(),window.Turtle=function(t,e,i){Object.assign(this,{canvas:null,weight:3,color:"red",pos:nt(e,i),dir:nt(0,-1),pen:1,posArray:[],dirArray:[],penUp:function(){this.pen=0},penDown:function(){this.pen=1},push:function(){this.posArray.push(this.pos.clone()),this.dirArray.push(this.dir.clone())},pop:function(){this.pos=this.posArray.pop(),this.dir=this.dirArray.pop(),this.canvas.moveTo(this.pos.x,this.pos.y)},rotate:function(t){this.dir.rotate(t)},move:function(t){this.pen&&this.canvas.beginPath(),this.canvas.moveTo(this.pos.x,this.pos.y),this.pos.x+=this.dir.x*t,this.pos.y+=this.dir.y*t,this.pen?(this.canvas.lineTo(this.pos.x,this.pos.y),this.canvas.lineWidth=this.weight,this.canvas.stroke(),this.canvas.closePath()):this.moveTo(this.pos.x,this.pos.y)}}),this.canvas=t,this.canvas.moveTo(this.pos.x,this.pos.y)};var jt=function(t){return t*Math.PI/180};window.xavier=new Turtle(H,250,window.innerHeight);var Ht="F",Ct="",Dt=20,Pt=2;Pt=jt(Dt);var Ut=0,Wt=void 0,Lt=void 0,$t=void 0,Xt=void 0,Yt=void 0,qt=void 0,Gt=void 0;j.onmousedown=function(t){Lt=t.offsetX,$t=t.offsetY,console.log("mouse: "+Lt+", "+$t+"\n"),h()},C.onmousedown=function(t){Xt=t.offsetX,Yt=t.offsetY,console.log("mouse: "+Lt+", "+$t+"\n"),n()},P.onmousedown=function(t){qt=t.offsetX,Gt=t.offsetY,console.log("mouse: "+Lt+", "+$t+"\n"),o()},window.jade=new Turtle(D,250,window.innerHeight);var zt="F",Nt="";window.kristen=new Turtle(U,250,window.innerHeight);var Ot="F",Vt="";setInterval(l,100)}();